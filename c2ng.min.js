/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 1);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
;(function (factory) {
	var registeredInModuleLoader;
	if (true) {
		!(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
		registeredInModuleLoader = true;
	}
	if (true) {
		module.exports = factory();
		registeredInModuleLoader = true;
	}
	if (!registeredInModuleLoader) {
		var OldCookies = window.Cookies;
		var api = window.Cookies = factory();
		api.noConflict = function () {
			window.Cookies = OldCookies;
			return api;
		};
	}
}(function () {
	function extend () {
		var i = 0;
		var result = {};
		for (; i < arguments.length; i++) {
			var attributes = arguments[ i ];
			for (var key in attributes) {
				result[key] = attributes[key];
			}
		}
		return result;
	}

	function decode (s) {
		return s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);
	}

	function init (converter) {
		function api() {}

		function set (key, value, attributes) {
			if (typeof document === 'undefined') {
				return;
			}

			attributes = extend({
				path: '/'
			}, api.defaults, attributes);

			if (typeof attributes.expires === 'number') {
				attributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);
			}

			// We're using "expires" because "max-age" is not supported by IE
			attributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';

			try {
				var result = JSON.stringify(value);
				if (/^[\{\[]/.test(result)) {
					value = result;
				}
			} catch (e) {}

			value = converter.write ?
				converter.write(value, key) :
				encodeURIComponent(String(value))
					.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);

			key = encodeURIComponent(String(key))
				.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)
				.replace(/[\(\)]/g, escape);

			var stringifiedAttributes = '';
			for (var attributeName in attributes) {
				if (!attributes[attributeName]) {
					continue;
				}
				stringifiedAttributes += '; ' + attributeName;
				if (attributes[attributeName] === true) {
					continue;
				}

				// Considers RFC 6265 section 5.2:
				// ...
				// 3.  If the remaining unparsed-attributes contains a %x3B (";")
				//     character:
				// Consume the characters of the unparsed-attributes up to,
				// not including, the first %x3B (";") character.
				// ...
				stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];
			}

			return (document.cookie = key + '=' + value + stringifiedAttributes);
		}

		function get (key, json) {
			if (typeof document === 'undefined') {
				return;
			}

			var jar = {};
			// To prevent the for loop in the first place assign an empty array
			// in case there are no cookies at all.
			var cookies = document.cookie ? document.cookie.split('; ') : [];
			var i = 0;

			for (; i < cookies.length; i++) {
				var parts = cookies[i].split('=');
				var cookie = parts.slice(1).join('=');

				if (!json && cookie.charAt(0) === '"') {
					cookie = cookie.slice(1, -1);
				}

				try {
					var name = decode(parts[0]);
					cookie = (converter.read || converter)(cookie, name) ||
						decode(cookie);

					if (json) {
						try {
							cookie = JSON.parse(cookie);
						} catch (e) {}
					}

					jar[name] = cookie;

					if (key === name) {
						break;
					}
				} catch (e) {}
			}

			return key ? jar[key] : jar;
		}

		api.set = set;
		api.get = function (key) {
			return get(key, false /* read as raw */);
		};
		api.getJSON = function (key) {
			return get(key, true /* read as json */);
		};
		api.remove = function (key, attributes) {
			set(key, '', extend(attributes, {
				expires: -1
			}));
		};

		api.defaults = {};

		api.withConverter = init;

		return api;
	}

	return init(function () {});
}));


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(2);


/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var lib_namespaceObject = {};
__webpack_require__.r(lib_namespaceObject);
__webpack_require__.d(lib_namespaceObject, "save", function() { return lib_save; });
__webpack_require__.d(lib_namespaceObject, "settings", function() { return lib_settings; });
__webpack_require__.d(lib_namespaceObject, "params", function() { return params; });
__webpack_require__.d(lib_namespaceObject, "firstClickParams", function() { return lib_firstClickParams; });
__webpack_require__.d(lib_namespaceObject, "historicalParams", function() { return lib_historicalParams; });
__webpack_require__.d(lib_namespaceObject, "sendToServer", function() { return sendToServer; });

// CONCATENATED MODULE: ./lib/queryParameters.js
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

/* harmony default export */ var queryParameters = (function (settings) {
  var query = {};
  var result = {};
  window.location.search.substring(1).split('&').map(function (param) {
    var _param$split = param.split('='),
        _param$split2 = _slicedToArray(_param$split, 2),
        key = _param$split2[0],
        value = _param$split2[1];

    var decodedKey = decodeURIComponent(key);
    var decodedValue = decodeURIComponent(value);
    query[decodedKey] = decodedValue;

    if (settings.trackQueryParameters.indexOf(decodedKey) >= 0) {
      result[decodedKey] = decodedValue;
    }
  });
  return result;
});
// EXTERNAL MODULE: ./node_modules/js-cookie/src/js.cookie.js
var js_cookie = __webpack_require__(0);
var js_cookie_default = /*#__PURE__*/__webpack_require__.n(js_cookie);

// CONCATENATED MODULE: ./lib/cookieParameters.js

/* harmony default export */ var cookieParameters = (function (settings) {
  var result = {};
  settings.trackCookies.map(function (key) {
    var value = js_cookie_default.a.get(key);

    if (value) {
      result[key] = value;
    }
  });
  return result;
});
// CONCATENATED MODULE: ./lib/log.js
/* harmony default export */ var log = (function () {
  if (window.attribution && window.attribution.settings && window.attribution.settings().debug) {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    console.log.apply(console.log, ["[c2ng.js]"].concat(args));
  }
});
var log_error = function error() {
  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    args[_key2] = arguments[_key2];
  }

  console.error.apply(console.error, ["[c2ng.js]"].concat(args));
};
// CONCATENATED MODULE: ./lib/visitParameters.js

var visitParameters_get = function get(settings) {
  try {
    var raw = localStorage.getItem(settings.localStorageName);
    return JSON.parse(raw) || [];
  } catch (e) {
    log_error('[localStorage.getItem + parse failed]', e);
    return [];
  }
};
var visitParameters_set = function set(settings, newParameters) {
  try {
    var raw = JSON.stringify(newParameters);
    localStorage.setItem(settings.localStorageName, raw);
  } catch (e) {
    log_error('[localStorage.setItem + parse failed]', e);
  }
};
var visitParameters_del = function del(settings) {
  try {
    localStorage.removeItem(settings.localStorageName);
  } catch (e) {
    log_error('[localStorage.removeItem failed]', e);
  }
};
// CONCATENATED MODULE: ./lib/index.js
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || lib_unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function lib_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return lib_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return lib_arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return lib_arrayLikeToArray(arr); }

function lib_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }





var trackingSettings = {
  localStorageName: '_c2ngjs',
  networkGeniusCookie: '',
  fp: '',
  channel: '',
  limitVisits: 15,
  trackQueryParameters: ['utm_campaign', 'utm_medium', 'utm_source', 'utm_content', 'utm_term', 'ref', 'gclid', 'msclkid', 'bid', 'awc', 'belboon', 'sPartner', 'wgu'],
  trackCookies: [
  /* Facebook Cookies: https://developers.facebook.com/docs/marketing-api/facebook-pixel/server-side-api/parameters#fbc */
  '_fbc', '_fbp',
  /* Google Analytics */
  '_ga', '_gid', '__utma', '__utmb', '__utmc', '__utmz', '__utmv', '__utmx', '__utmxx',
  /* Google Optimize */
  '_gaexp', '_opt_awcid', '_opt_awmid', '_opt_awgid', '_opt_awkid', '_opt_utmc',
  /* Google Ads https://business.safety.google/adscookies/ */
  '_gcl_gb', '_gcl_aw', '_gcl_gs', '_gcl_ag', '_opt_awkid', '_opt_utmc',
  /* Bing Ads https://traffic3.net/wissen/datenschutz/google-cookies */
  '_uetsid', '_uetvid', '_uetmsclkid',
  /* ADCELL  */
  'adcell',
  /* Webgains  */
  'partner', '__CK__WG__',
  /* AWIN - View  */
  'AWSESS',
  /* AWIN - Click https://success.awin.com/s/article/What-kind-of-cookies-does-Awin-use?language=de */
  '_aw_sn_*', '_aw_j_*',
  /* IDEALO https://cg1.link/OOCw */
  '__utma'],
  trackReferrer: true,
  ignoreVisitsWithoutUTMParameters: true,
  visitFilterFunction: null,
  // Only accept visits if this function returns true
  debug: false
};
var thisVisit = null;
var lib_save = function save() {
  // Set cookie data
  var previousVisits = visitParameters_get(trackingSettings);
  thisVisit = {
    time: new Date().toUTCString(),
    query: queryParameters(trackingSettings),
    cookies: cookieParameters(trackingSettings),
    page: window.location.href,
    networkGeniusCookie: trackingSettings.networkGeniusCookie,
    channel: trackingSettings.channel
  };

  if (trackingSettings.trackReferrer) {
    thisVisit.referrer = document.referrer;
  }

  if (trackingSettings.ignoreVisitsWithoutUTMParameters) {
    var shouldIgnore = true;
    var queryParamKeys = Object.keys(thisVisit.query || {});
    var trackQueryParamLen = trackingSettings.trackQueryParameters.length;

    for (var i = 0; i < trackQueryParamLen; i++) {
      if (queryParamKeys.includes(trackingSettings.trackQueryParameters[i])) {
        shouldIgnore = false;
        break;
      }
    }

    if (shouldIgnore) {
      log('Ignoring visit, no UTM parameters found.');
      return;
    }
  }

  if (trackingSettings.visitFilterFunction) {
    if (!trackingSettings.visitFilterFunction(thisVisit)) {
      log('Ignoring visit, visitFilterFunction returned falsey.');
      return;
    }
  }

  var visits = [].concat(_toConsumableArray(previousVisits), [thisVisit]).filter(function (t) {
    return !!t;
  });

  if (visits.length > trackingSettings.limitVisits) {
    visits = [visits[0]].concat(_toConsumableArray(visits.splice(2, visits.length)));
  }

  visitParameters_set(trackingSettings, visits);
  return thisVisit;
};
var lib_settings = function settings(options) {
  if (options) {
    trackingSettings = _objectSpread(_objectSpread({}, trackingSettings), options);
  }

  return trackingSettings;
};
var params = function params() {
  if (!thisVisit) {
    lib_save();
  }

  return thisVisit;
};
var lib_firstClickParams = function firstClickParams() {
  var visits = visitParameters_get(trackingSettings);
  return visits[0];
};
var lib_historicalParams = function historicalParams() {
  return visitParameters_get(trackingSettings);
};
var sendToServer = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(endpoint) {
    var visitParametersData, myHeaders, formdata, requestOptions;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            visitParametersData = visitParameters_get(trackingSettings);

            try {
              myHeaders = new Headers();
              formdata = new FormData();
              formdata.append('visitParametersData', JSON.stringify(visitParametersData));
              formdata.append('fp', trackingSettings.fp);
              requestOptions = {
                method: "POST",
                headers: myHeaders,
                body: formdata,
                redirect: "follow"
              };
              fetch(endpoint + "/api/customer-journey/updateorcreate", requestOptions).then(function (response) {
                return response.text();
              })["catch"](function (error) {
                return console.error(error);
              }); // Remove Customer Journey

              visitParameters_del(trackingSettings);
            } catch (error) {
              log('There was a problem sending the data:');
              log(error);
            }

          case 2:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));

  return function sendToServer(_x) {
    return _ref.apply(this, arguments);
  };
}();
// CONCATENATED MODULE: ./c2ng.js

window.attribution = lib_namespaceObject;
/* harmony default export */ var c2ng = __webpack_exports__["default"] = (lib_namespaceObject);

/***/ })
/******/ ]);