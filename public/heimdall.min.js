/*!
 * 
 *     /*!
 *     * heimdall - Copyright (c) 2025 Patryk Rzyszka
 *     * Lizenz: CC BY-NC 4.0
 *     * Weitere Informationen: https://creativecommons.org/licenses/by-nc/4.0/
 *     * /
 */(()=>{var e={215:(e,r,t)=>{var o,a;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(i){if(void 0===(a="function"==typeof(o=i)?o.call(r,t,r,e):o)||(e.exports=a),e.exports=i(),!!0){var n=window.Cookies,c=window.Cookies=i();c.noConflict=function(){return window.Cookies=n,c}}}((function(){function e(){for(var e=0,r={};e<arguments.length;e++){var t=arguments[e];for(var o in t)r[o]=t[o]}return r}function r(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(o){function a(){}function i(r,t,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},a.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var n=JSON.stringify(t);/^[\{\[]/.test(n)&&(t=n)}catch(e){}t=o.write?o.write(t,r):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),r=encodeURIComponent(String(r)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var l in i)i[l]&&(c+="; "+l,!0!==i[l]&&(c+="="+i[l].split(";")[0]));return document.cookie=r+"="+t+c}}function n(e,t){if("undefined"!=typeof document){for(var a={},i=document.cookie?document.cookie.split("; "):[],n=0;n<i.length;n++){var c=i[n].split("="),l=c.slice(1).join("=");t||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var u=r(c[0]);if(l=(o.read||o)(l,u)||r(l),t)try{l=JSON.parse(l)}catch(e){}if(a[u]=l,e===u)break}catch(e){}}return e?a[e]:a}}return a.set=i,a.get=function(e){return n(e,!1)},a.getJSON=function(e){return n(e,!0)},a.remove=function(r,t){i(r,"",e(t,{expires:-1}))},a.defaults={},a.withConverter=t,a}((function(){}))}))}},r={};function t(o){var a=r[o];if(void 0!==a)return a.exports;var i=r[o]={exports:{}};return e[o](i,i.exports,t),i.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};t.r(e),t.d(e,{firstClickParams:()=>R,historicalParams:()=>C,params:()=>O,save:()=>k,sendToServer:()=>P,setNetwork:()=>j,settings:()=>E});const r=e=>{var r=window.location.search.substring(1).split("&").reduce(((e,r)=>{var[t,o]=r.split("="),a=decodeURIComponent(t),i=decodeURIComponent(o);return e[a]=i,e}),{}),t={};return Object.entries(r).forEach((r=>{var[o,a]=r;e.trackQueryParameters.includes(o)&&(t[o]=a)})),t};var o=t(215),a=t.n(o);function i(e){return e.trackCookies.reduce(((e,r)=>{var t=a().get(r);return t&&(e[r]=t),e}),{})}const n=function(){if(window.attribution&&window.attribution.settings&&window.attribution.settings().debug){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];console.log.apply(console.log,["[heimdall]",...r])}};var c=(e,r)=>{!function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];console.error.apply(console.error,["[heimdall]",...r])}(e,r)},l="defaultStorageName",u=e=>{var r=e.localStorageName||l;try{var t=localStorage.getItem(r);return JSON.parse(t)||[]}catch(e){return c("[localStorage.getItem + parse failed]",e),[]}},s=";path=/;SameSite=None;Secure";function m(e,r,t){!function(e){document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")}(e);var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3);var a="expires=".concat(o.toUTCString());document.cookie="".concat(e,"=").concat(r,";").concat(a).concat(s)}function p(e){var r="".concat(e,"="),t=decodeURIComponent(document.cookie).split(";");for(var o of t)if((o=o.trim()).startsWith(r))return o.substring(r.length)}var f="atux",d="atux_trk";function g(e,r,t,o){var a=JSON.stringify(t);m(e,a,o),localStorage.setItem(r,a)}function v(e,r,t){var o={network:e,method:r,cookie:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null};g(f,f,e,t),sessionStorage.setItem(f,e),g(d,d,o,t)}function _(e,r,t,o,a,i,n){try{var c=e[i](n),l=c.value}catch(e){return void t(e)}c.done?r(l):Promise.resolve(l).then(o,a)}function y(e){return function(){var r=this,t=arguments;return new Promise((function(o,a){var i=e.apply(r,t);function n(e){_(i,o,a,n,c,"next",e)}function c(e){_(i,o,a,n,c,"throw",e)}n(void 0)}))}}function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?h(Object(t),!0).forEach((function(r){b(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function b(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,r||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var x={localStorageName:"_heimdall",atuxCookie:"",fp:"",channel:"",limitVisits:150,trackQueryParameters:["utm_campaign","utm_medium","utm_source","utm_content","utm_term","ref","gclid","msclkid","bid","awc","belboon","sPartner","wgu","fbclid"],trackCookies:["_fbc","_gid","__utma","__utmb","__utmc","__utmz","__utmv","__utmx","__utmxx","_gaexp","_opt_awcid","_opt_awmid","_opt_awgid","_opt_awkid","_opt_utmc","_gcl_gb","_gcl_aw","_gcl_gs","_gcl_ag","_opt_awkid","_opt_utmc","_uetsid","_uetvid","_uetmsclkid","adcell","partner","__CK__WG__","AWSESS","_aw_sn_*","_aw_j_*","__utma"],trackReferrer:!0,ignoreVisitsWithoutUTMParameters:!1,visitFilterFunction:null,debug:!0},S=null,k=()=>{var e=u(x);if(S={time:(new Date).toUTCString(),query:r(x),cookies:i(x),page:window.location.href,atuxCookie:x.atuxCookie,channel:x.channel},x.trackReferrer&&(S.referrer=document.referrer),x.ignoreVisitsWithoutUTMParameters){for(var t=!0,o=Object.keys(S.query||{}),a=x.trackQueryParameters.length,s=0;s<a;s++)if(o.includes(x.trackQueryParameters[s])){t=!1;break}if(t)return void n("Ignoring visit, no UTM parameters found.")}if(!x.visitFilterFunction||x.visitFilterFunction(S)){var m=[...e,S].filter((e=>!!e));return m.length>x.limitVisits&&(m=[m[0],...m.splice(2,m.length)]),((e,r)=>{var t=e.localStorageName||l;try{var o=JSON.stringify(r);localStorage.setItem(t,o)}catch(e){c("[localStorage.setItem + stringification failed]",e)}})(x,m),S}n("Ignoring visit, visitFilterFunction returned falsey.")},E=e=>(e&&(x=w(w({},x),e)),x),O=()=>(S||k(),S),R=()=>u(x)[0],C=()=>u(x),P=function(){var e=y((function*(e){var r=u(x);try{var t=new Headers,o=new FormData;o.append("visitParametersData",JSON.stringify(r)),o.append("fp",x.fp),fetch(e+"/api/customer-journey/updateorcreate",{method:"POST",headers:t,body:o,redirect:"follow"}).then((e=>e.text())).catch((e=>console.error(e))),(e=>{var r=e.localStorageName||l;try{localStorage.removeItem(r)}catch(e){c("[localStorage.removeItem failed]",e)}})(x)}catch(e){n("There was a problem sending the data:"),n(e)}}));return function(r){return e.apply(this,arguments)}}(),U=[{param:"bid",name:"ADCELL",expiry:30},{param:"adcell_id",name:"ADCELL",expiry:30},{param:"belboon",name:"Belboon",expiry:30},{param:"awc",name:"AWIN",expiry:30},{param:"wgu",name:"Webgains",expiry:30},{param:"gclid",name:"Google",expiry:1},{param:"msclkid",name:"Bing",expiry:1},{param:"li_fat_id",name:"LinkedIn",expiry:30},{param:"fbclid",name:"META",expiry:30},{param:"twclid",name:"Twitter",expiry:30},{param:"billiger",name:"Billiger",expiry:30},{param:"ref",name:"GoAffPro",expiry:30}],I=[{param:"billiger.de",name:"Billiger",expiry:1},{param:"biliger.de",name:"Billiger.de",expiry:1},{param:"email",name:"E-Mail",expiry:1},{param:"klaviyo",name:"Klaviyo",expiry:1},{param:"brevo",name:"Brevo",expiry:1}],T={DIRECT:1,SUB_SHOP:2,PARAMETER:3,COOKIE:4,UTM:5,PV:6,REFERRER:7,DISCOUNT_CODE:8};function D(e){new URLSearchParams(window.location.search).has("magaDebug")&&console.log(e)}function A(e){var r=e?e.split("?")[1]:window.location.search.slice(1),t={};return r?(r.split("#")[0].split("&").forEach((e=>{var[r,o]=e.split("="),a=function(e){return e.toLowerCase()}(r),i=function(e){return void 0===e||e.toLowerCase()}(o);!function(e){return e.match(/\[(\d+)?\]$/)}(a)?function(e,r,t){e[r]?"string"==typeof e[r]?e[r]=[e[r],t]:e[r].push(t):e[r]=t}(t,a,i):function(e,r,t){var o=r.replace(/\[(\d+)?\]/,"");e[o]||(e[o]=[]);if(r.match(/\[\d+\]$/)){var a=/\[(\d+)\]/.exec(r)[1];e[o][a]=t}else e[o].push(t)}(t,a,i)})),t):t}function N(){var e=A();for(var r of U)if(e[r.param])return r.name;return!1}function j(){var e=window.location.pathname.split("/")[1],r=A(),t=p("atux");for(var o of U)if(r[o.param])return"awc"===o.param&&m("atux_awc",r[o.param],o.expiry),"bid"===o.param&&m("atux_bid",r[o.param],o.expiry),v(o.name,T.PARAMETER,o.expiry),void D("User came from ".concat(o.name));for(var a of["utm_source","utm_medium","utm_campaign"])if(r[a])for(var i of U)if(r[a].toLowerCase().includes(i.name.toLowerCase()))return v(i.name,T.UTM,i.expiry),void D("User came from ".concat(i.name," via ").concat(a));var n={deu:"IDEALO",de_:"Bestcheck",de:"Billiger.de",at:"Billiger.at"};if(n[e])return v(n[e],T.SUB_SHOP,30),void D("User came from ".concat(n[e]));if(t)D("already stored, skipping cookie check.");else{var c=[],l=null,u=null;for(var s of[{cookie:["AWSESS","aw","awpv","aw3","awc"],name:"AWIN",prio:1,expiry:30},{cookie:["adcell","adcell_id","adcell_token","adcell_merchant"],name:"ADCELL",prio:1,expiry:30},{cookie:["__CK__WG__","wgcampaignid","wguserid"],name:"Webgains",prio:1,expiry:30},{cookie:["_gcl_gb","_gcl_aw","_gcl_gs","_gcl_ag","_opt_awkid","__gads","__gpi"],name:"Google",prio:3,expiry:1},{cookie:["_uetsid","_uetvid","_uetmsclkid"],name:"Bing",prio:3,expiry:1},{cookie:["_fbc"],name:"META",prio:3,expiry:1}])for(var f of s.cookie){p(f)&&((!l||s.prio<l.prio)&&(l={name:s.name,prio:s.prio,expiry:s.expiry},u=f),s.prio<=2&&c.push(s.name))}if(c.length>0&&("Google"===l.name||"Bing"===l.name))v(c[0],T.COOKIE,c[0].expiry,u);else if(l)v(l.name,T.COOKIE,l.expiry,u);else{D("No network identified.");var d=document.referrer;if(d.includes("google."))v("Google Search",T.REFERRER,1),D("User came from Google Search");else if(d.includes("bing."))v("Bing Search",T.REFERRER,1),D("User came from Bing Search");else if(d.includes("search.yahoo."))v("Yahoo Search",T.REFERRER,1),D("User came from Yahoo Search");else if(d.includes("duckduckgo.com"))v("duckduckgo",T.REFERRER,1),D("User came from duckduckgo");else if(d.includes("idealo.de"))v("IDEALO",T.REFERRER,1),D("User came from IDEALO");else if(d.includes("facebook"))v("META",T.REFERRER,1),D("User came from META");else if(d.includes("guenstiger.de"))v("Guenstiger_de",T.REFERRER,1),D("User came from Guenstiger_de");else if(r.utm_source)for(var g of I)if(r.utm_source.toLowerCase().includes(g.param.toLowerCase()))return void v(g.name,T.UTM,g.expiry)}}}function F(){var e,r,t=window.location.pathname;"/htlp"===t||"/htlp/"===t||"/a/htlp"===t||"/ngc/htlp"===t?(e=A(),r=N(),console.log(r),!1!==r&&(setLocalStorageWithExpiry("atux_pv_".concat(r),JSON.stringify(e),3),m("atux_pv_".concat(r),JSON.stringify(e),3),console.log("PostView entry stored for ".concat(r)))):j(),x.atuxCookie=localStorage.getItem("atux"),x.channel=N(),E(x),k();var o=O();o.time=(new Date).toUTCString();var a=p("adcell_vc");a&&m("atux_vck",a,3);var i=p("_heimdall");try{i=i?JSON.parse(i):[]}catch(e){console.error("JSON.parse-Fehler:",e),i=[]}i.push(o),m("_heimdall",JSON.stringify(i),30)}y((function*(){F()}))(),y((function*(){try{void 0===window.magaDomain&&(window.magaDomain="m-a-g-a.de");var e=p("atux_hits"),r=null!=e?e:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",o=0;o<e;o++)t+=r.charAt(Math.floor(62*Math.random()));return t}(64);m("atux_hits",r,364);var t={params:O(),fp:r},o=btoa(JSON.stringify(t));(yield fetch("https://"+magaDomain+"/api/hits/s",{method:"POST",body:o})).ok}catch(e){console.error(e)}}))(),window.heimdall=e})()})();